<!DOCTYPE html>
<html>
<head>
  <title>Genealogy Tree</title>
  <script src="https://cdn.jsdelivr.net/npm/vis-network/standalone/umd/vis-network.min.js"></script>
  <style type="text/css">
    #mynetwork {
      width: 800px;
      height: 600px;
      border: 1px solid lightgray;
    }
  </style>
</head>
<body style="margin: 0; overflow: hidden;">
  <div id="mynetwork" style="width: 100%; height: 100vh;"></div>

  <script type="text/javascript">
    var nodes = {{ nodes | tojson }};
    var edges = {{ edges | tojson }};

    var edgesWithLabels = edges.map(function(edge) {
      return { from: edge.from, to: edge.to, label: edge.relation };
    });

    var container = document.getElementById('mynetwork');

    var data = {
      nodes: nodes,
      edges: edgesWithLabels
    };

    var options = {
        edges: {
            arrows: {
                to: {
                    enabled: true,
                    scaleFactor: 1,
                }
            }
        }
    };

    var network = new vis.Network(container, data, options);

    network.on('doubleClick', function (params) {
        if (params.nodes.length === 1) {
            var nodeId = params.nodes[0];
            window.location.href = "/person/" + nodeId;
        }
    });

  </script>
</body>
</html>